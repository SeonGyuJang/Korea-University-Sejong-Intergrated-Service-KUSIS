{% extends "base.html" %}

{% block title %}KUSIS - 관리자 대시보드{% endblock %}

{% block content %}
<div class="content-area" style="grid-template-columns: 1fr; max-width: 1000px; margin: 0 auto;">
    <div class="widget admin-dashboard-widget">
        <div class="widget-header">
            <h3><i class="fas fa-users-cog"></i> 관리자 대시보드</h3>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label"><i class="fas fa-user-graduate"></i> 총 회원 수</div>
                <div class="stat-value" style="color: var(--korea-red); font-size: 32px; font-weight: 700;">{{ member_count }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label"><i class="fas fa-calendar-check"></i> 일반 사용자 수</div>
                <div class="stat-value">{{ member_list | rejectattr('is_admin') | list | length }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label"><i class="fas fa-shield-alt"></i> 관리자 계정 수</div>
                <div class="stat-value">{{ member_list | selectattr('is_admin') | list | length }}</div>
            </div>
        </div>

        <h4 style="margin-top: 30px; margin-bottom: 15px; font-size: 18px; color: var(--text-primary);"><i class="fas fa-list"></i> 회원 목록</h4>
        
        <div class="member-list-container">
            <table class="member-table">
                <thead>
                    <tr>
                        <th>학번</th>
                        <th>이름</th>
                        <th>소속 학과</th>
                        <th>권한</th>
                    </tr>
                </thead>
                <tbody>
                    {% for member in member_list %}
                    <tr class="{% if member.is_admin %}admin-row{% endif %}">
                        <td>{{ member.id }}</td>
                        <td>{{ member.name }}</td>
                        <td>{{ member.department }}</td>
                        <td>
                            <span class="auth-tag {% if member.is_admin %}admin{% else %}user{% endif %}">
                                {% if member.is_admin %}<i class="fas fa-crown"></i> 관리자{% else %}일반 사용자{% endif %}
                            </span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}